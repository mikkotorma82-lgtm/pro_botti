
# All tunable params live here â€” no magic numbers in code.
general:
  project_name: "pro_botti"
  data_dir: "./data"       # optional local CSV dir for OHLCV
  model_dir: "./models"
  log_level: "INFO"
  seed: 42

market:
  symbols: ["BTCUSDT", "ETHUSDT"]
  timeframe: "15m"
  exchange_tz: "UTC"

# map tf -> poll seconds (no hardcodes in code)
poll_seconds:
  "1m": 10
  "5m": 20
  "15m": 30
  "1h": 120
  "4h": 300

features:
  # names map to functions in features/feature_engineering.py
  ta_features:
    - name: "rsi"
      window: 14
    - name: "stoch_k"
      window: 14
      smooth_k: 3
    - name: "willr"
      window: 14
    - name: "sma"
      window: 20
    - name: "ema"
      window: 50
    - name: "bbands"
      window: 20
      ndev: 2.0
    - name: "atr"
      window: 14

labels:
  scheme: "forward_return"   # forward_return | barrier
  forward_horizon: 12        # bars ahead for label (e.g. 12 x 15m = 3h)
  threshold_bp: 5            # basis points threshold around 0 for neutral
  barrier:
    tp_bp: 50                # take-profit barrier (bps)
    sl_bp: 50                # stop-loss barrier (bps)
    max_horizon: 48          # bars

model:
  type: "random_forest"      # random_forest | xgboost (if installed)
  params:
    n_estimators: 400
    max_depth: 6
    min_samples_leaf: 5
    n_jobs: -1

cv:
  type: "walk_forward"
  n_splits: 5
  purge: 1
  embargo: 0

execution:
  broker: "paper"           # paper | capital
  risk:
    max_leverage: 1.0
    risk_per_trade_bp: 25       # % of equity per trade in bp (25bp = 0.25%)
    volatility_target_annual: 0.20  # 20% vol target
    max_positions: 5
    max_symbol_weight: 0.50
  sizing:
    method: "vol_target"     # fixed_fraction | vol_target | kelly_fraction
    fixed_fraction: 0.01     # only if method=fixed_fraction
  slippage_bp: 1.0
  fees_bp: 1.0

broker:
  capital:
    api_key: "${CAPITAL_API_KEY}"
    username: "${CAPITAL_LOGIN}"
    password: "${CAPITAL_PASSWORD}"
    demo: true

backtest:
  initial_cash: 100000.0
  commission_bp: 1.0
